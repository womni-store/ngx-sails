!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("socket.io-client"),require("rxjs/Observable"),require("rxjs/operators/map"),require("rxjs/Subject")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","socket.io-client","rxjs/Observable","rxjs/operators/map","rxjs/Subject"],t):t((e.ng=e.ng||{},e.ng.SailsClient={}),e.ng.core,e.ng.common,e["node_modules/socket"]["io-client/dist/socket"].io.js,e.Rx,e.Rx.operators,e.Rx)}(this,function(e,t,r,n,o,i,s){"use strict";var u,a=n.default,c=function(){return function(){}}(),p=new t.InjectionToken("sails.client.config"),f=new t.InjectionToken("io.instance"),d=a||n;(l=u||(u={})).GET="get",l.POST="post",l.PUT="put",l.DELETE="delete",l.OPTIONS="options",l.HEAD="head",l.PATCH="patch";var l,h=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),y=function(){return function(e,t){if("string"==typeof e)try{e=JSON.parse(e)}catch(t){throw new Error("Malformed response "+e+". Could not be parsed to JSON")}this.config=t,this.headers=e.headers||{},this.status=e.statusCode||200}}(),b=function(e){h(t,e);function t(t,r){var n=e.call(this,t,r)||this;return n.data=t.body||{},n}return t}(y),g=function(e){h(t,e);function t(t,r){var n=e.call(this,t,r)||this;return n.error=t.body||{},n}return t}(y),v=function(){function e(){}return e.send=function(e,t,r){var n=e.method;e.headers=(s=e.headers,Object.keys(s).forEach(function(e){e.toLowerCase()!==e&&(s[e.toLowerCase()]=s[e],delete s[e])}),s);var s;return o.Observable.create(function(o){t.emit(n,e,function(t){if(t.statusCode>=400){var n=new g(t,e);r.next(n),o.error(n)}else o.next(t);o.complete()})}).pipe(i.map(function(t){return new b(t,e)}))},e}();var j={language:"javascript",platform:"browser",version:"1.1.12"},O=function(){function e(e,t){void 0===e&&(e={});var r=this.getConfig(e),n=r.uri,o=r.options;e.headers&&(this.defaultHeaders=e.headers),this.io=t||d(n,o),this.uri=n,this.configOptions=o,this.errorsSubject=new s.Subject,this.requestErrors=this.errorsSubject.asObservable()}return e.prototype.get=function(e,t){return this.sendRequest(e,u.GET,void 0,t)},e.prototype.post=function(e,t,r){return this.sendRequest(e,u.POST,t,r)},e.prototype.put=function(e,t,r){return this.sendRequest(e,u.PUT,t,r)},e.prototype.delete=function(e,t){return this.sendRequest(e,u.DELETE,void 0,t)},e.prototype.options=function(e,t){return this.sendRequest(e,u.OPTIONS,void 0,t)},e.prototype.head=function(e,t){return this.sendRequest(e,u.HEAD,void 0,t)},e.prototype.patch=function(e,t,r){return this.sendRequest(e,u.PATCH,t,r)},e.prototype.on=function(e){var t,r=this;return o.Observable.create(function(n){return t=function(e){return n.next(e)},r.io.on(e,t),function(){return r.io.off(e,t)}})},Object.defineProperty(e.prototype,"configuration",{get:function(){return{uri:this.uri,headers:this.defaultHeaders,options:this.configOptions}},enumerable:!0,configurable:!0}),e.prototype.sendRequest=function(e,t,r,n){void 0===n&&(n={});var o={url:e,method:t,data:r};return Object.assign(o,{params:n.params||n.search,headers:Object.assign({},this.defaultHeaders,n.headers)}),v.send((i=o,Object.keys(i).forEach(function(e){return!i[e]&&delete i[e]}),i),this.io,this.errorsSubject);var i},e.prototype.getConfig=function(e){var t={transports:["websocket"]},r=e.uri,n={};return Object.assign(n,Object.keys(j).forEach(function(e){return n["__sails_io_sdk_"+e]=j[e]})),e.options&&e.options.query&&Object.assign(n,e.options.query),Object.assign(t,e.options,{query:n}),{uri:r,options:t}},e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[{type:c},{type:void 0,decorators:[{type:t.Inject,args:[f]}]}]},e}();function m(e,t){return new O(e,t)}var q=function(){function e(){}return e.configureClient=function(t,r){return{ngModule:e,providers:[{provide:p,useValue:t},{provide:f,useValue:r},{provide:O,useFactory:m,deps:[p,f]}]}},e.decorators=[{type:t.NgModule,args:[{imports:[r.CommonModule]}]}],e.ctorParameters=function(){return[]},e}();e.SailsClientModule=q,e.SailsClient=O,e.ISailsClientConfig=c,Object.defineProperty(e,"__esModule",{value:!0})});